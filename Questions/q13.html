<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Cómic Pensamiento Crítico 2</title>
    <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">
    
var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update, render: render});

var ill;
var left;
var right;
var voice;
var voice_button;
var back_button;
var A;
var B;
var C;
var A_press;
var B_press;
var C_press;
var ill_p;
var left_p;
var right_p;
var voice_button_p;
var back_button_p;
var A_p;
var B_p;
var C_p;


function preload() {
    game.load.audio('voice', 'assetsAudio/q13.m4a');
    game.load.image('ill', 'assetsImg/q13.png');   
    game.load.spritesheet('left', 'assetsImg/arrowleft_2.png',90,90);
    game.load.spritesheet('right', 'assetsImg/arrowright_2.png',89,89);
    game.load.spritesheet('voice_button', 'assetsImg/button_voice3_50.png', 50, 50);
    game.load.spritesheet('back_button', 'assetsImg/back_story.png', 162, 81);
    game.load.spritesheet('A', 'assetsImg/q13a.png', 380 , 80 );
    game.load.spritesheet('B', 'assetsImg/q13b.png', 380 , 80 );
    game.load.spritesheet('C', 'assetsImg/q13c.png', 380 , 80 );
    ill_p=[game.world.centerX, game.world.centerY];
    left_p=[0, 250];
    right_p=[700, 250];
    voice_button_p= [380, 525];
    back_button_p=[200, 500];
    A_p=[ game.world.centerX-80, game.world.centerY-60];
    B_p=[ game.world.centerX-80, game.world.centerY+20];
    C_p=[ game.world.centerX-80, game.world.centerY+100];
    A_press=false;
    B_press=false;
    C_press=false;
}
function create() {    
    game.stage.backgroundColor = "#FFFFFF";
    ill=game.add.sprite(game.world.centerX, game.world.centerY, 'ill');
    ill.anchor.setTo(0.5);
    voice=game.add.audio('voice');
    voice.play();
    left=game.add.button(left_p[0], left_p[1], 'left', goLeft, this, 0);
    right=game.add.button(right_p[0],right_p[1], 'right', goRight, this, 0);
    right.visible=false;
    voice_button = game.add.button(voice_button_p[0], voice_button_p[1], 'voice_button', play_sound ,this, 0);
    back_button=game.add.button(back_button_p[0], back_button_p[1], 'back_button', goBack, this, 0);
    A= game.add.button(A_p[0], A_p[1],'A', AnsA, this, 0);
    A.anchor.setTo(0.5);
    B= game.add.button(B_p[0], B_p[1],'B', AnsB, this, 0);
    B.anchor.setTo(0.5);
    C= game.add.button(C_p[0], C_p[1],'C', AnsC, this, 0);
    C.anchor.setTo(0.5);

    if(sessionStorage.getItem("bad")=="13"){
        left.visible=false;
    }
}
function play_sound(){
    voice.play();
}
function AnsA(){
    A_press=true;
    B_press=false;
    C_press=false;
}
function AnsB(){
    A_press=false;
    B_press=true;
    C_press=false;
}
function AnsC(){
    A_press=false;  
    B_press=false;
    C_press=true;
}
function goLeft(){
    window.open("q12.html", "_self");
}
function goRight(){
    if(A_press){
        sessionStorage.setItem('i18', '1');
    }else if (B_press){
        sessionStorage.setItem('i18', '0');
    }else{
        sessionStorage.setItem('i18', '0');
    }
    if(sessionStorage.getItem("bad")=="13"){
            if(A_press){
                    sessionStorage.setItem("i29","1");
            }else if(B_press){
                    sessionStorage.setItem("i29","0");
            }else{
                    sessionStorage.setItem("i29","0");
            }
            window.open("../Story/h39.html", "_self");
    }
    
    if(sessionStorage.getItem("bad")=="0"){
        console.log(sessionStorage.getItem("bad"));
        if(sessionStorage.getItem('i8')=='0' || sessionStorage.getItem('i9')=='0' || sessionStorage.getItem('i11')=='0'|| sessionStorage.getItem('i12')=='0' || sessionStorage.getItem('i14')=='0' || sessionStorage.getItem('i15')=='0' ||
            sessionStorage.getItem('i16')=='0' || sessionStorage.getItem('i10')=='0' || sessionStorage.getItem('i18')=='0'){
            
            console.log("bad!!!");
            if(sessionStorage.getItem('i8')=='0')
            {
              sessionStorage.setItem("bad","1");
            }
            else if(sessionStorage.getItem('i9')=='0')
            {
              sessionStorage.setItem("bad","2");
            }
            else if(sessionStorage.getItem('i11')=='0')
            {
              sessionStorage.setItem("bad","4");
            }
            else if(sessionStorage.getItem('i12')=='0')
            {
              sessionStorage.setItem("bad","6");
            }
            else if(sessionStorage.getItem('i14')=='0')
            {
              sessionStorage.setItem("bad","7");
            }
            else if(sessionStorage.getItem('i15')=='0')
            {
              sessionStorage.setItem("bad","11");
            }
            else if(sessionStorage.getItem('i16')=='0')
            {
              sessionStorage.setItem("bad","9");
            }
            else if(sessionStorage.getItem('i10')=='0')
            {
              sessionStorage.setItem("bad","12");
            }
            else if(sessionStorage.getItem('i18')=='0')
            {
              sessionStorage.setItem("bad","13");
            }
        window.open("check_bad.html", "_self");
      }else{
        console.log("No hay respuesta vacia");
        window.open("../Story/h39.html", "_self");
      }
      
    }

}
function goBack(){
    sessionStorage.setItem('before', '13');
    sessionStorage.setItem("i30","1");
    window.open("../Story/h23.html", "_self");
}
function update(){
    if(A_press)
        A.frame=1;
    else
        A.frame=0;

    if(B_press)
        B.frame=1;
    else
        B.frame=0;

    if(C_press)
        C.frame=1;
    else
        C.frame=0;

    if(A_press || B_press || C_press)
        right.visible=true;
}
function render(){
    //game.debug.inputInfo(32, 32);
}
</script>

</body>
</html>